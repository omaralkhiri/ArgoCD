# **Argo CD Customized Configuration Options – Detailed Documentation**

This document provides a comprehensive explanation of the customizable configuration options supported by Argo CD when working with **Kustomize**–based applications. These options allow you to modify resource names, images, labels, annotations, and Kustomize versions for your deployments.

Argo CD enhances Kustomize by exposing parameters that can be used within the `spec.source.kustomize` section of an Argo CD Application manifest.

---

## **1. Name Prefix**

Argo CD allows you to automatically append a prefix to the names of all resources generated by Kustomize. This is useful when deploying multiple environments (e.g., dev, stage, prod) or when logically grouping resources.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      namePrefix: myprefix-
```

**Effect:**
If your Deployment is named `api-server`, it becomes `myprefix-api-server`.

---

## **2. Name Suffix**

Similar to `namePrefix`, Argo CD supports adding a suffix to all resource names. This helps differentiate deployments or versions.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      nameSuffix: -v1
```

**Effect:**
A Deployment named `api-server` becomes `api-server-v1`.

---

## **3. Image Overrides**

Argo CD allows you to override the container images defined in your Kustomize configuration without modifying the original manifest.
This is useful when promoting images across environments or dynamically updating tags.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      images:
        - "nginx=nginx:1.25"
        - "backend=myregistry.com/app/backend:2.0.1"
```

Argo CD will replace the image or the image tag wherever it appears in your Kustomize-managed manifests.

**Capabilities:**

* Override entire image (`backend=repo/backend:2.0.1`)
* Override tag only (`nginx:1.23 -> nginx:1.25`)
* Multiple image replacements supported

---

## **4. Common Labels**

Kustomize supports applying common labels to every resource it generates. Argo CD exposes this functionality directly.

You can add labels that will automatically appear on all application resources.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      commonLabels:
        environment: production
        team: platform
```

**Effect:**
Every resource (Deployments, Services, ConfigMaps…) will include:

```yaml
labels:
  environment: production
  team: platform
```

This is highly useful for:

* Resource grouping
* Metrics collection
* Cost allocation
* Policy and RBAC rule targeting

---

## **5. Common Annotations**

Similar to labels, Kustomize allows adding annotations to all resources.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      commonAnnotations:
        argocd-managed: "true"
        owner: "devops-team"
```

These annotations will appear on every generated Kubernetes resource.

Common reasons to use annotations:

* Auditing
* Monitoring tools
* GitOps metadata
* Canary deployment metadata

---

## **6. Kustomize Version Override**

Argo CD can explicitly use a specific version of Kustomize for an application. This is useful if your application requires features available only in newer (or older) Kustomize versions.

**Usage:**

```yaml
spec:
  source:
    kustomize:
      version: v5.0.1
```

### Important Note

Before using a custom version **you must add the version to the Argo CD ConfigMap**:

`argocd-cm`:

```yaml
data:
  kustomize.version.v5.0.1: |
    apiVersion: v1
    kind: ConfigMap
```

If the version is not registered in the ConfigMap, Argo CD will not use it.

---

## **7. Summary**

Argo CD supports a wide range of customization options for Kustomize-based applications, including:

| Feature               | Purpose                                    |
| --------------------- | ------------------------------------------ |
| **namePrefix**        | Prepend text to all resource names         |
| **nameSuffix**        | Append text to all resource names          |
| **images**            | Override image names or tags               |
| **commonLabels**      | Add labels to all generated resources      |
| **commonAnnotations** | Add annotations to all generated resources |
| **version**           | Use a custom Kustomize version             |

These options give teams powerful control over how resources are generated and deployed, enabling environment-specific adjustments, image promotions, and consistent labeling standards without modifying the underlying YAML manifests.
